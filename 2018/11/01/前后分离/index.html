<!DOCTYPE html>
<html lang=>
  <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="description" content="">
  <meta name="keywords" content="">
  
    <link rel="icon" href="/favicon.ico">
  
    
  <title>前后分离 | tomxxkl的个人博客</title>
  <link rel="stylesheet" href="/style.css">
  <link rel="stylesheet" href="/lib/jquery.fancybox.min.css">
  <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<body>
  <header>
  <div class="header-container">
    <a class='logo' href="/">
      <span>tomxxkl的个人博客</span>
    </a>
    <ul class="right-header">
      
        <li class="nav-item">
          
            <a href="/" class="item-link">首页</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/about" class="item-link">关于</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/archives" class="item-link">归档</a>
          
        </li>
      
        <li class="nav-item">
          
            <a href="/tags" class="item-link">标签</a>
          
        </li>
      
    </ul>
  </div>
</header>

  <main id='post'>
  <div class="content">
    <article>
        <section class="content markdown-body">
          <h1>前后分离</h1>
          <div class='post-meta'>
            <i class="fa fa-calendar" aria-hidden="true"></i> <time>2018/11/01</time>
            
            
          </div>
          <h3 id="1-什么是REST"><a href="#1-什么是REST" class="headerlink" title="1.什么是REST"></a>1.什么是REST</h3><h4 id="名称"><a href="#名称" class="headerlink" title="名称"></a>名称</h4><p>rest即Representational State Transfer，表现层状态转化，如果一个架构符合REST原则，就称它为RESTful架构。</p>
<h4 id="资源（Resources）"><a href="#资源（Resources）" class="headerlink" title="资源（Resources）"></a>资源（Resources）</h4><p>–REST的名称”表现层状态转化”中，省略了主语。”表现层”其实指的是”资源”（Resources）的”表现层”。<br>–可以用一个URI（统一资源定位符）指向资源，每种资源对应一个特定的URI。所谓”上网”，就是与互联网上一系列的”资源”互动，调用它的URI。</p>
<h4 id="表现层（Representation）"><a href="#表现层（Representation）" class="headerlink" title="表现层（Representation）"></a>表现层（Representation）</h4><p>–”资源”是一种信息实体，它可以有多种外在表现形式。我们把”资源”具体呈现出来的形式，叫做它的”表现层”（Representation）。<br>–比如，文本可以用txt格式表现，也可以用HTML格式、XML格式、JSON格式表现，甚至可以采用二进制格式；图片可以用JPG格式表现，也可以用PNG格式表现。<br>–URI只代表资源的实体，不代表它的形式。严格地说，有些网址最后的”.html”后缀名是不必要的，因为这个后缀名表示格式，属于”表现层”范畴，而URI应该只代表”资源”的位置。它的具体表现形式，应该在HTTP请求的头信息中用Accept和Content-Type字段指定，这两个字段才是对”表现层”的描述。</p>
<h4 id="状态转化（State-Transfer）"><a href="#状态转化（State-Transfer）" class="headerlink" title="状态转化（State Transfer）"></a>状态转化（State Transfer）</h4><p>–访问一个网站，就代表了客户端和服务器的一个互动过程。在这个过程中，势必涉及到数据和状态的变化。<br>–互联网通信协议HTTP协议，是一个无状态协议。这意味着，所有的状态都保存在服务器端。因此，如果客户端想要操作服务器，必须通过某种手段，让服务器端发生”状态转化”（State<br> Transfer）。而这种转化是建立在表现层之上的，所以就是”表现层状态转化”。<br>–客户端用到的手段，只能是HTTP协议。具体来说，就是HTTP协议里面，四个表示操作方式的动词：GET、POST、PUT、DELETE。它们分别对应四种基本操作：GET用来获取资源，POST用来新建资源（也可以用于更新资源），PUT用来更新资源，DELETE用来删除资源。<br><img src="https://img-blog.csdn.net/20171016165042384?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2luYXRfMjc0NTAzNzc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h4 id="理解RESTful架构"><a href="#理解RESTful架构" class="headerlink" title="理解RESTful架构"></a>理解RESTful架构</h4><p>http请求方式</p>
<p>​    GET: 获取数据</p>
<p>​    POST:创建数据</p>
<p>​    PUT:用于修改数据(修改全部属性)</p>
<p>​    PATCH:用于修改数据(修改部分属性)</p>
<p>​    DELETE:删除数据<br><figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">POST http://127.0.0.1/api/student/   #提交数据(创建数据)</span><br><span class="line">GET http://127.0.0.1/api/student/1/	 #获取指定数据</span><br><span class="line">PUT http://127.0.0.1/api/student/1/	 #修改数据(全部属性)</span><br><span class="line">PATCH http://127.0.0.1/api/student/1/  #修改数据(部分属性)</span><br><span class="line">DELETE http://127.0.0.1/api/student/1/ #删除指定数据</span><br></pre></td></tr></table></figure></p>
<p><img src="https://img-blog.csdn.net/20171016163022322?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2luYXRfMjc0NTAzNzc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<hr>
<p>–常见的返回状态</p>
<p><img src="https://img-blog.csdn.net/20171016163033880?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2luYXRfMjc0NTAzNzc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h4 id="详细返回状态码"><a href="#详细返回状态码" class="headerlink" title="详细返回状态码"></a><a href="http://blog.csdn.net/sinat_27450377/article/details/78213632" target="_blank" rel="noopener">详细返回状态码</a></h4><p><img src="https://img-blog.csdn.net/20171016163042002?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvc2luYXRfMjc0NTAzNzc=/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="这里写图片描述"></p>
<h3 id="2-django中的Rest框架-rest-framewark"><a href="#2-django中的Rest框架-rest-framewark" class="headerlink" title="2.django中的Rest框架(rest_framewark)"></a>2.django中的Rest框架(rest_framewark)</h3><h4 id="1-django中使用restful"><a href="#1-django中使用restful" class="headerlink" title="1.django中使用restful"></a>1.django中使用restful</h4><h5 id="1-安装准备"><a href="#1-安装准备" class="headerlink" title="1.安装准备"></a>1.安装准备</h5><p>安装djangorestframework</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install djangorestframework==3.4.6</span><br></pre></td></tr></table></figure>
<p>安装django-filter</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><span class="line">pip install django-filter #filterin support</span><br></pre></td></tr></table></figure>
<h5 id="2-设置配置文件"><a href="#2-设置配置文件" class="headerlink" title="2.设置配置文件"></a>2.设置配置文件</h5><p>修改django项目的setting.py文件</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line">INSTALLED_APPS = [</span><br><span class="line">    <span class="string">'django.contrib.admin'</span>,</span><br><span class="line">    <span class="string">'django.contrib.auth'</span>,</span><br><span class="line">    <span class="string">'django.contrib.contenttypes'</span>,</span><br><span class="line">    <span class="string">'django.contrib.sessions'</span>,</span><br><span class="line">    <span class="string">'django.contrib.messages'</span>,</span><br><span class="line">    <span class="string">'django.contrib.staticfiles'</span>,</span><br><span class="line">    <span class="string">'app'</span>,		</span><br><span class="line">    <span class="string">'rest_framework'</span>,   <span class="comment">#添加rest_framework程序</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p>修改app程序中的urls.py,配置restful框架的路由。</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework.routers <span class="keyword">import</span> SimpleRouter</span><br><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> app <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取路由对象</span></span><br><span class="line">router = SimpleRouter()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 注册资源，这儿注册的是视图下的一个类</span></span><br><span class="line">router.register(<span class="string">'article'</span>, views.ArticleView)</span><br><span class="line">urlpatterns = [</span><br><span class="line">	url(<span class="string">r'^all_article/'</span>, views.all_article, name=<span class="string">'all_article'</span>)</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置访问路由地址</span></span><br><span class="line">urlpatterns += router.urls</span><br></pre></td></tr></table></figure>
<h5 id="3-创建自定义的接口"><a href="#3-创建自定义的接口" class="headerlink" title="3.创建自定义的接口"></a>3.创建自定义的接口</h5><p>在app下的views.py创建对应的 ArticleView并继承相应的父类</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> mixins, viewsets, status</span><br><span class="line"><span class="keyword">from</span> rest_framework.response <span class="keyword">import</span> Response</span><br><span class="line"><span class="keyword">from</span> app.models <span class="keyword">import</span> Article</span><br><span class="line"><span class="keyword">from</span> app.serializers <span class="keyword">import</span> ArticleSerializer</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">mixins.ListModelMixin:这个类包含了获取所有数据的方法，可以实现分页获取或者大量数据获取</span></span><br><span class="line"><span class="string">mixins.DestroyModelMixin:这个类包含了删除指定数据的方法</span></span><br><span class="line"><span class="string">mixins.CreateModelMixin:这个类包含了创建数据(增加数据)的方法</span></span><br><span class="line"><span class="string">mixins.RetrieveModelMixin:这个类包含了查找指定数据的方法</span></span><br><span class="line"><span class="string">mixins.UpdateModelMixin:这个类包含了修改(更新)指定数据的方法</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">如果要想自定的数据接口可以实现相应的增加，删除，修改等效果，需要继承上述相应的类。</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleView</span><span class="params">(viewsets.GenericViewSet,</span></span></span><br><span class="line"><span class="class"><span class="params">				  mixins.ListModelMixin,   </span></span></span><br><span class="line"><span class="class"><span class="params">				  mixins.DestroyModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">				  mixins.CreateModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">				  mixins.RetrieveModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">				  mixins.UpdateModelMixin,</span></span></span><br><span class="line"><span class="class"><span class="params">				  )</span>:</span></span><br><span class="line">	<span class="comment"># 查询数据</span></span><br><span class="line">	queryset = Article.objects.all()</span><br><span class="line"></span><br><span class="line">	<span class="comment"># 序列化，需自定义相应的序列化类</span></span><br><span class="line">	serializer_class = ArticleSerializer</span><br><span class="line"></span><br><span class="line">	<span class="comment">#对删除方法的重写</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">destroy</span><span class="params">(self, request, *args, **kwargs)</span>:</span></span><br><span class="line">		instance = self.get_object()</span><br><span class="line">		self.perform_destroy (instance)</span><br><span class="line">		<span class="keyword">return</span> Response (status=status.HTTP_204_NO_CONTENT)</span><br><span class="line">	<span class="comment">#对删除方法的重写</span></span><br><span class="line">	<span class="function"><span class="keyword">def</span> <span class="title">perform_destroy</span><span class="params">(self, instance)</span>:</span></span><br><span class="line">		instance.is_delete = <span class="number">1</span></span><br><span class="line">		instance.save()</span><br></pre></td></tr></table></figure>
<p>在app下创建ArticleSerializer类,实现数据的序列化</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> rest_framework <span class="keyword">import</span> serializers</span><br><span class="line"><span class="keyword">from</span> app.models <span class="keyword">import</span> Article</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ArticleSerializer</span><span class="params">(serializers.ModelSerializer)</span>:</span></span><br><span class="line">	<span class="class"><span class="keyword">class</span> <span class="title">Meta</span>:</span></span><br><span class="line"></span><br><span class="line">		<span class="comment"># 指定序列化的模型</span></span><br><span class="line">		model = Article</span><br><span class="line">		<span class="comment"># 序列化的字段</span></span><br><span class="line">		fields = [<span class="string">'id'</span>, <span class="string">'title'</span>, <span class="string">'desc'</span>, <span class="string">'img'</span>, <span class="string">'create_time'</span>]</span><br></pre></td></tr></table></figure>
<h3 id="3-rest框架的前端获取"><a href="#3-rest框架的前端获取" class="headerlink" title="3.rest框架的前端获取"></a>3.rest框架的前端获取</h3><h4 id="1-ajax样式展示"><a href="#1-ajax样式展示" class="headerlink" title="1.ajax样式展示"></a>1.ajax样式展示</h4><p>可以使用$.ajax({})。<br>也可以使用$.get(url,function(data),json)<br>或者$.post(url,json,function(data))等方式来实现前端异步获取数据接口的数据。并且这种异步获取的数据无法在页面的源代码中看到(数据)</p>
<h5 id="ajax"><a href="#ajax" class="headerlink" title="ajax"></a>ajax</h5><figure class="highlight"><table><tr><td class="code"><pre><span class="line">#常规</span><br><span class="line">$.ajax(&#123;</span><br><span class="line">  url:地址,</span><br><span class="line">  type:"POST/GET/DELETE...",</span><br><span class="line">  data:&#123;要提交的json数据&#125;,</span><br><span class="line">  dataType:"json",</span><br><span class="line">  success: function(data)&#123;</span><br><span class="line">    </span><br><span class="line">  &#125;,</span><br><span class="line">  error:function(data)&#123;&#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
<h4 id="2-前端实现"><a href="#2-前端实现" class="headerlink" title="2.前端实现"></a>2.前端实现</h4><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>显示所有文章<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">"button"</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"show"</span> <span class="attr">style</span>=<span class="string">"width: 400px; height: 200px; background-color: #fdff8e"</span> &gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"table"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/jquery/3.1.0/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined"> //实现异步获取文章数据</span></span><br><span class="line"><span class="undefined">    $(function()&#123;</span></span><br><span class="line"><span class="undefined">        $('#button').click(</span></span><br><span class="line"><span class="undefined">            function () &#123;</span></span><br><span class="line"><span class="undefined">                $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">                    url: 'http://127.0.0.1:8000/app/article',</span></span><br><span class="line"><span class="undefined">                    type: 'GET',</span></span><br><span class="line"><span class="undefined">                    dataType: 'json',</span></span><br><span class="line"><span class="undefined">                    success: function (data) &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="xml">                       var table_html = '<span class="tag">&lt;<span class="name">table</span>&gt;</span><span class="tag">&lt;<span class="name">thead</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>id<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>title<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;/<span class="name">thead</span>&gt;</span>' +</span></span><br><span class="line"><span class="xml">                           '<span class="tag">&lt;<span class="name">tbody</span>&gt;</span>'</span></span><br><span class="line"><span class="xml">                        for(var i=0;i<span class="tag">&lt;<span class="name">data.length;</span> <span class="attr">i</span>+=<span class="string">1)&#123;</span></span></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="xml">                            table_html += '<span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>'+ data[i].id+'<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>'+ data[i].title+'<span class="tag">&lt;/<span class="name">td</span>&gt;</span>'</span></span><br><span class="line"><span class="xml">                            table_html += "<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'"+data[i].id+"'</span>&gt;</span>编辑<span class="tag">&lt;/<span class="name">a</span>&gt;</span>"</span></span><br><span class="line"><span class="xml">                            table_html += '<span class="tag">&lt;<span class="name">a</span> <span class="attr">onclick</span>=<span class="string">"add_article()"</span>&gt;</span>创建<span class="tag">&lt;/<span class="name">a</span>&gt;</span>'</span></span><br><span class="line"><span class="xml">                            table_html += ' <span class="tag">&lt;<span class="name">a</span> <span class="attr">onclick</span>=<span class="string">"+delete_article('+data[i].id+');"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">                        &#125;</span></span><br><span class="line"><span class="xml">                        table_html += '<span class="tag">&lt;/<span class="name">tbody</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span>'</span></span><br><span class="line"><span class="undefined">                        $('#show').html(table_html);</span></span><br><span class="line"><span class="undefined">                    &#125;,</span></span><br><span class="line"><span class="undefined">                    error:function (data) &#123;</span></span><br><span class="line"><span class="undefined">                        alert('请求失败')</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                    &#125;</span></span><br><span class="line"><span class="undefined">                )</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        )</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">      function delete_article(id) &#123;</span></span><br><span class="line"><span class="undefined">            $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">                url: '/app/article/'+id+'/',</span></span><br><span class="line"><span class="undefined">                type:'DELETE',</span></span><br><span class="line"><span class="undefined">                dataType:'json',</span></span><br><span class="line"><span class="undefined">                success:function (data) &#123;</span></span><br><span class="line"><span class="undefined">                    alert('删除成功')</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                error:function (data) &#123;</span></span><br><span class="line"><span class="undefined">                    alert('删除失败')</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">		//添加文章</span></span><br><span class="line"><span class="undefined">        function add_article() &#123;</span></span><br><span class="line"><span class="xml">          var form_html = '<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">""</span> <span class="attr">id</span>=<span class="string">"article"</span>&gt;</span>';</span></span><br><span class="line"><span class="undefined">          form_html += "&#123;% csrf_token %&#125;"</span></span><br><span class="line"><span class="xml">          form_html += '标题:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"title"</span>&gt;</span>';</span></span><br><span class="line"><span class="xml">          form_html += '描述:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"desc"</span>&gt;</span>';</span></span><br><span class="line"><span class="xml">          form_html += '<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span> <span class="attr">onclick</span>=<span class="string">"subdata()"</span>&gt;</span>';</span></span><br><span class="line"><span class="xml">          form_html += '<span class="tag">&lt;/<span class="name">form</span>&gt;</span>';</span></span><br><span class="line"><span class="undefined">          $('#table').html(form_html)</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">  		//提交表单数据</span></span><br><span class="line"><span class="undefined">        function subdata() &#123;</span></span><br><span class="line"><span class="undefined">            var title = $('input[name ="title"]').val()</span></span><br><span class="line"><span class="undefined">            var desc = $('input[name ="desc"]').val()</span></span><br><span class="line"><span class="undefined">            var csrf = $('input[name="csrfmiddlewaretoken"]').val()</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">            $.ajax(&#123;</span></span><br><span class="line"><span class="undefined">                url:'/app/article/',</span></span><br><span class="line"><span class="undefined">                type: 'POST',</span></span><br><span class="line"><span class="undefined">                data:&#123;'title':title,'desc':desc&#125;,</span></span><br><span class="line"><span class="undefined">                headers:&#123;'X-CSRFToken': csrf&#125;,</span></span><br><span class="line"><span class="undefined">                success:function (data) &#123;</span></span><br><span class="line"><span class="undefined">                    alert('创建成功')</span></span><br><span class="line"><span class="undefined">                &#125;,</span></span><br><span class="line"><span class="undefined">                error:function (data) &#123;</span></span><br><span class="line"><span class="undefined">                    alert('创建失败')</span></span><br><span class="line"><span class="undefined">                &#125;</span></span><br><span class="line"><span class="undefined">            &#125;)</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

        </section>
    </article>
    
        <!-- disqus 评论框 start -->
        <div class="comment">
            <div id="disqus_thread" class="disqus-thread">
              <i>Loading comments box needs to over the wall</i>
            </div>
        </div>
        <!-- disqus 评论框 end -->
    
    
        <!-- livere 评论框 start -->
        <div class="comment">
            <div id="lv-container" data-id="city" data-uid="your_livere_uid"></div>
        </div>
        <!-- livere 评论框 end -->
        
  </div>
  <aside>
    
    <div class="toc-container">
        <h1>目录</h1>
        <div class="content">
            <ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-什么是REST"><span class="toc-number">1.</span> <span class="toc-text">1.什么是REST</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#名称"><span class="toc-number">1.1.</span> <span class="toc-text">名称</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#资源（Resources）"><span class="toc-number">1.2.</span> <span class="toc-text">资源（Resources）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#表现层（Representation）"><span class="toc-number">1.3.</span> <span class="toc-text">表现层（Representation）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#状态转化（State-Transfer）"><span class="toc-number">1.4.</span> <span class="toc-text">状态转化（State Transfer）</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#理解RESTful架构"><span class="toc-number">1.5.</span> <span class="toc-text">理解RESTful架构</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#详细返回状态码"><span class="toc-number">1.6.</span> <span class="toc-text">详细返回状态码</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-django中的Rest框架-rest-framewark"><span class="toc-number">2.</span> <span class="toc-text">2.django中的Rest框架(rest_framewark)</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-django中使用restful"><span class="toc-number">2.1.</span> <span class="toc-text">1.django中使用restful</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-安装准备"><span class="toc-number">2.1.1.</span> <span class="toc-text">1.安装准备</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-设置配置文件"><span class="toc-number">2.1.2.</span> <span class="toc-text">2.设置配置文件</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-创建自定义的接口"><span class="toc-number">2.1.3.</span> <span class="toc-text">3.创建自定义的接口</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-rest框架的前端获取"><span class="toc-number">3.</span> <span class="toc-text">3.rest框架的前端获取</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-ajax样式展示"><span class="toc-number">3.1.</span> <span class="toc-text">1.ajax样式展示</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#ajax"><span class="toc-number">3.1.1.</span> <span class="toc-text">ajax</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-前端实现"><span class="toc-number">3.2.</span> <span class="toc-text">2.前端实现</span></a></li></ol></li></ol>
        </div>
    </div>
    
  </aside>
</main>

<!-- disqus 公共JS代码 -->
<script type="text/javascript">
  /* * * CONFIGURATION VARIABLES * * */
  var disqus_shortname = "your_disqus_shortname";
  var disqus_identifier = "http://yoursite.com/2018/11/01/前后分离/";
  var disqus_url = "http://yoursite.com/2018/11/01/前后分离/";

  isAgent(getDisqus)

  // determine user agent in China
  function isAgent(cb) {
    var url = '//graph.facebook.com/feed?callback=h';
    var xhr = new XMLHttpRequest();
    var called = false;
    xhr.open('GET', url);
    xhr.onreadystatechange = function() {
      if (xhr.readyState === 4 && xhr.status === 200) {
      called = true;
      cb(true);
      }
    };
    xhr.send();
    // timeout 1s, this facebook API is very fast.
    setTimeout(function() {
      if (!called) {
      xhr.abort();
      cb(false)
      }
    }, 1000);
  }

  function getDisqus(isAgent) {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; 
    dsq.async = true
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq)
  }
</script>
<!-- disqus 公共JS代码 end -->


<script type="text/javascript">
  (function(d, s) {
      var j, e = d.getElementsByTagName(s)[0];

      if (typeof LivereTower === 'function') { return; }

      j = d.createElement(s);
      j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
      j.async = true;

      e.parentNode.insertBefore(j, e);
  })(document, 'script');
</script>


  <footer>
  <div class="copyright">
    <div>
      &copy; 2018 | Powered by <a href="https://hexo.io" target="_blank">Hexo</a>&nbsp
    </div>
    <div>
      Theme by <a href="https://github.com/lewis-geek/hexo-theme-Aath" target="_blank">Aath</a>
    </div>
  </div>
</footer>


<script src="https://cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script>
<script src="/lib/in-view.min.js"></script>
<script src="/lib/lodash.min.js"></script>
<script>
  var isDown = true
  var oldY = 0
  inView.offset(50)

  document.body.addEventListener('touchstart', function(){});
  
  window.addEventListener('scroll', _.throttle(e => {
    var currentY = window.scrollY
    if((oldY - currentY) < 0) {
      isDown = true
    } else {
      isDown = false
    }
    oldY = currentY
  }, 250))

  $("article img").each(function() {
      var strA = "<a data-fancybox='gallery' href='" + this.src + "'></a>";
      $(this).wrapAll(strA);
  });

  $('.toc-link').each(function() {
      var href = $(this).attr("href");
      
      inView(href).on('exit', () => {
        if (isDown) {
          handleActive(href)
        }
      })

      inView(href).on('enter', () => {
        if (!isDown) {
          handleActive(href)
        }
      })

      this.onclick = function(e) {
        var pos = $(href).offset().top - 10;
        $("html,body").animate({scrollTop: pos}, 300);
        setTimeout(() => {
          handleActive(href)
        }, 350)
        return false
      }
  })

  function handleActive(href) {
    document.querySelectorAll('.toc-link').forEach(elm => {
      elm.classList.remove('active')
    })
    document.querySelector(".toc [href='"+ href +"']").classList.add('active')
  }
</script>
<script src="/lib/jquery.fancybox.min.js"></script>


</body>
</html>
